{% load widget_tweaks %}

<input type="hidden" get='{{ field.html_name}}' register='{{ field.value }}' call='{{call}}' >
<div class="btn-group" role="group" aria-label="Basic example"><button type="button" class="btn btn-sm fuse-ripple-ready input_calc btn-danger" btn="{{ field.html_name}}_minus"  ><i class="icon-minus"></i></button>{% render_field field class+="input_calc_number"  %}<span class='input_calc_number_prefix'>{% if prefix %}{{ prefix }}{% endif %}</span><button type="button" class="btn btn-sm fuse-ripple-ready input_calc  btn-success" btn="{{ field.html_name}}_plus" ><i class="icon-plus"></i></button></div></br>
<script type="text/javascript" data-cfasync="false">
$( document ).ready(function() {
  $( "[btn='{{ field.html_name}}_minus']" ).click( function()  {
    var a = $( "input[name='{{ field.html_name}}']").val();
    console.log('ok')
    $( "input[name='{{ field.html_name}}']").val( Number(a) - 1 ).trigger('change') ;
  })

  $( "[btn='{{ field.html_name}}_plus']" ).click( function()  {
    var a = $( "input[name='{{ field.html_name}}']").val();
    console.log('ok')
    $( "input[name='{{ field.html_name}}']").val( Number(a) + 1 ).trigger('change') ;
   })

  $("input[name='{{ field.html_name}}']").change( function() {
    $.post( '{{call}}{{ field.html_name}}' , { 'csrfmiddlewaretoken': '{{ csrf_token }}' , '{{ field.html_name}}' : $( this ).val() } ).done(function( data ) {
      console.log(data)
    })
  })
  })
</script>
