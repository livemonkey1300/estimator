{% load static %}
<!doctype html>
<html lang="en" class="no-js">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="{% static 'General/css/reset.css' %}"> <!-- CSS reset -->
	<link rel="stylesheet" href="{% static 'General/css/style.css' %}"> <!-- Resource style -->
  <link rel="stylesheet" href="{% static 'General/css/Field.css' %}"
	<script src="{% static 'General/js/modernizr.js' %}"></script> <!-- Modernizr -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script type="text/javascript" src="{% static 'General/buttonstrip.min.js' %}"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<title>Morphing Modal Window | CodyHouse</title>
  <style>
      @import url('https://fonts.googleapis.com/css?family=Khula:400,700');
			.button-strip {
			    top: 0px;
			    left: 0px;
			    width: 400px;
			    height: 25px;
			    border: 2px solid #a8d465;
			    border-radius: 3px;
			    display: flex;
			}
			.strip-button {
			    background-color: white;
			    color: #a8d465;
			    width: 50%;
			    height: 21px;
			    text-align: center;
			    vertical-align: middle;
			    line-height: 16px;
			    transition: background-color .4s linear, color .2s linear;
			    cursor: pointer;
			}
      .strip-button span {
          color: inherit;
      }
      .strip-button-text {
          font-family: 'Khula', sans-serif;
          font-weight: 400;
          font-size: 16px;
          color: #a8d465;
          margin: 0px;
          padding: 0px;
      }
      .active-strip-button {
          background-color: #a8d465;
          color: white;
      }
			#change_estimate_div .btn {
			    /* width: 55%; */
			    /* border-radius: 0.5em; */
			    color: #82c122;
			    /* white-space: nowrap; */
			    font-size: 16px;
			    font-weight: 500;
			    -webkit-font-smoothing: antialiased;
			    -moz-osx-font-smoothing: grayscale;
			    -webkit-transition: color 0.2s 0.3s, width 0.3s 0s;
			    -moz-transition: color 0.2s 0.3s, width 0.3s 0s;
			    transition: color 0.2s 0.3s, width 0.3s 0s;
			    margin-top: 13px;
			    margin-bottom: 13px;
					background: black;
			}
			#change_estimate_div {
			border-radius: 0px 0px 4px 0px;
		}
		.signup-form table {
    width: 100%;
		}
		.signup-form .btn {
		    border-color: #fff;
		}
		button.input_calc {
	width: 30px!important;
	border: 1px solid #c3c5c6;
	height: 42px!important;

}

button.input_calc:hover {
	border: 1px solid #82c122;
	background: #d5ecb1;
}

i.icon-plus {
	font-size: 16px;
}
i.icon-minus {
	font-size: 16px!important;
}
a#advance{
    float: left;
}
#voip_mail input , #voip_mail span.text-danger{
	width: 80%;
	margin-left: 10%;
	margin-bottom: 10px;
}
#voip_mail span.text-danger {
    font-size: 10px;
}
.tr-danger td {
	max-height: 16px;
	height: 16px;
	line-height: 1px !important;
}
  </style>
</head>
<body>
	<header class="sticky">
		<a class="rootLink item-home colorize" href="https://dnsnetworks.ca/"><img src="https://dnsnetworks.ca//wp-content/uploads/2018/08/whitelogo.svg" width="200px"></a>
		<div id="change_estimate_div" style="display:none;" >
			<button class="btn" id='estimate'>Change Your Estimate</button>
		</div>
	</header>

	<section class="cd-section">
		<p>
			<div class="rates-table col" id='start_text'>
	<h3><strong>Get your estimate </strong>  under 5 minutes!</h3>
	</div>
		</p>
  {% load menu_tag %}

		<div class="cd-modal-action" >
			<a href="#0" class="btn" data-type="modal-trigger"  id="new_estimate" >Get Your Estimate Now</a>
			<span class="cd-modal-bg"></span>
		</div> <!-- cd-modal-action -->
<!-- cd-modal-action -->
		<iframe id="quote_data" src="" width="100%" height="0px" style="display:none;"></iframe>
		<div class="cd-modal">
			<div class="cd-modal-content">
				<div class="card signup-form">
				<h2>Get your estimate<strong></strong></h2><br><br>
        <div class="row">
					<div class="col-sm" id='estimate_mail_current'>
						{{ VOIP_FORM }}
					</div>
<div class="col-sm-4" id='estimate_mail' style="display:none;" >
<div class="card">
	<div class="card-header">
		<button class="btn btn-primary" id='send_estimate'>Send my estime</button>
		<button class="btn btn-primary" id='send_estimate_contact' >Send and contact me</button>
		<button class="btn btn-primary" id='preview'>Preview</button>
	</div>
	<div class="card-body">
    <h5 class="card-title"></h5>
			<div id="change_estimate_form" style="display:none;"></div>
  </div>
</div>
</div>

</div>
</div>


			</div> <!-- cd-modal-content -->
		</div> <!-- cd-modal -->

		<a href="#0" class="cd-modal-close">Close</a>
	</section> <!-- .cd-section -->
<script src="{% static 'General/js/jquery-2.1.1.js' %}"></script>
<script src="{% static 'General/js/velocity.min.js' %}"></script>
<script src="{% static 'General/js/main.js' %}"></script> <!-- Resource jQuery -->
<script  type="text/javascript" data-cfasync="false">

$('.request_load').on( "submit", function() {
	$(this).trigger('change')
})

function get_voip_mail(){
  		 var array = $("#voip_mail").find('input,select').serializeArray();
  		 return array
}
function post_voip_mail_request() {
	var url =  $('#voip_mail').attr( "call" )
	var data = $('#voip_mail').serializeArray()
	$.each(get_voip_mail(), function( index, value ) {
		data.push({ name : value.name , value : value.value  })
	});
	$.post( url  , data ).done(function( call ) {
     $('#change_estimate_form').html( call );
		 $('#quote_data').attr('src', "{% url 'General:show_email' %}").attr('style', '' ).attr('width', '100%' ).attr('height', '1000px' );
	})
}

$('.request_load').on( "spawn", function() {
	$('#change_estimate_div').show()
	$('#change_estimate_form,#estimate_mail').show()
	$('#estimate_mail_current').attr('class','col-sm-8')
	$('#new_estimate').hide()
	$('#start_text').hide()
	$(this).hide()
	$('#estimate').click( function()  {
		$('[data-type="modal-trigger"]').trigger('click')
	})
})

$('#preview').click( function()  {
	$('.request_load').trigger('submit')
	$('.cd-modal-close').trigger('click')
})

$(function() {
		$('#send_estimate').click( function()  {
			post_voip_mail_request()
		})
		$('#send_estimate_contact').click( function()  {
			post_voip_mail_request()
		})
		$('#advance').click( function( )  {
			$( "#advance_toggle" ).load( "{% url 'General:create_voip_extend' %}" )
			 $('#voip_post').attr( "call" ,"{% url 'General:create_voip' 'extend' %}"  )
			});
		})
		$( window ).on( "load", function() {
        console.log( "window loaded" );
				$('#estimate').click( function()  {
					$('[data-type="modal-trigger"]').trigger('click')
				})
    });
</script>
</body>
</html>
